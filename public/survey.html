<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="./assets/css/styles.css" />
    <title>Friends Survey</title>
</head>
<body>
    <div class="container">
        <h2>Survey Questions</h1>
        <h4>Please answer the below questionnaire on friend finder in order to receive qualified friend suggestions.</h3>
        <hr/>

        <form action="api/friends" method="post">
            <!-- add bootstrap form-control classes -->
            <h3><strong>About You</strong></h3>
            <h4>Name (Required)</h4>
            <input type="text" id="name" name="name" class="form-control" required>
        
            <h4>Link to Photo Image</h4>
            <input type="text" id="photo" name="photo" class="form-control">
            <hr />
            <ol>
                <li>
                    <label for="0">What kind of book might you take with you on a trip if you had room to pack just one?</label>
                    <fieldset>
                        <input type="radio" name="0" value="1"> Poetry<br />
                        <input type="radio" name="0" value="2"> A novel<br />
                        <input type="radio" name="0" value="3"> Short stories<br />
                        <input type="radio" name="0" value="4"> Enlightenment reading<br />
                        <input type="radio" name="0" value="5"> Scripture<br /><br />
                    </fieldset>
                </li>
                <li>
                    <label for="1">What might be your favorite natural dwelling landscape?</label>
                    <fieldset>
                        <input type="radio" name="1" value="1"> Coastal<br />
                        <input type="radio" name="1" value="2"> Mountains<br />
                        <input type="radio" name="1" value="3"> Forest<br />
                        <input type="radio" name="1" value="4"> Desert<br />
                        <input type="radio" name="1" value="5"> Urban<br /><br />
                    </fieldset>
                    </label>
                </li>
                <li>
                    <label for="2">Name your most fun hobby?</label>
                    <fieldset>
                        <input type="radio" name="2" value="1"> Arts & Crafts<br />
                        <input type="radio" name="2" value="2"> Hikes<br />
                        <input type="radio" name="2" value="3"> Travel<br />
                        <input type="radio" name="2" value="4"> Fitness Activity<br />
                        <input type="radio" name="2" value="5"> Cooking<br /><br />
                    </fieldset>
                </li>
                <li>
                    <label for="3">What is your favorite 'special occassion' kind of food?</label>
                    <fieldset>
                        <input type="radio" name="3" value="1"> French<br />
                        <input type="radio" name="3" value="2"> Sushi<br />
                        <input type="radio" name="3" value="3"> Vegetarian<br />
                        <input type="radio" name="3" value="4"> Trendy Continental Food<br />
                        <input type="radio" name="3" value="5"> Tapas<br /><br />
                    </fieldset>
                    </label>
                </li>
                <li>
                    <label for="4">What is your favorite pet?</label>
                    <fieldset>
                        <input type="radio" name="4" value="1"> Cats<br />
                        <input type="radio" name="4" value="2"> Dogs<br />
                        <input type="radio" name="4" value="3"> Birds<br />
                        <input type="radio" name="4" value="4"> Small mammals<br />
                        <input type="radio" name="4" value="5"> Fish<br /><br />
                    </fieldset>
                </li>
                <li>
                    <label for="5">What is your favorite way to spend some time with someone?</label>
                    <fieldset>
                        <input type="radio" name="5" value="1"> Day in the Park<br />
                        <input type="radio" name="5" value="2"> Museum exhibit or Movie<br />
                        <input type="radio" name="5" value="3"> Day trip or hike<br />
                        <input type="radio" name="5" value="4"> Walking tour or shopping<br />
                        <input type="radio" name="5" value="5"> Out to eat<br /><br />
                    </fieldset>
                    </label>
                </li>
                <li>
                    <label for="6">If you had to pick one, what quality might you cherish best in a person?</label>
                    <fieldset>
                        <input type="radio" name="6" value="1"> Kindness<br />
                        <input type="radio" name="6" value="2"> Romance<br />
                        <input type="radio" name="6" value="3"> Provides for me<br />
                        <input type="radio" name="6" value="4"> Tenderness<br />
                        <input type="radio" name="6" value="5"> Humor / Fun<br /><br />
                    </fieldset>
                </li>
                <li>
                    <label for="7">What nourishes your soul?</label>
                    <fieldset>
                        <input type="radio" name="7" value="1"> Eastern philosophy<br />
                        <input type="radio" name="7" value="2"> Western thought / logic<br />
                        <input type="radio" name="7" value="3"> Catholic<br />
                        <input type="radio" name="7" value="4"> Protestant or Other<br />
                        <input type="radio" name="7" value="5"> Muslim<br /><br />
                    </fieldset>
                    </label>
                </li>
                <li>
                    <label for="8">What game do you like on rainy days indoors?</label>
                    <fieldset>
                        <input type="radio" name="8" value="1"> Cards<br />
                        <input type="radio" name="8" value="2"> Chess<br />
                        <input type="radio" name="8" value="3"> Dice style games<br />
                        <input type="radio" name="8" value="4"> Puzzles<br />
                        <input type="radio" name="8" value="5"> Trivia<br /><br />
                    </fieldset>
                </li>
                <li>
                    <label for="9">What archetype might more closely describe you as a woman?</label>
                    <fieldset>
                        <input type="radio" name="9" value="1"> Mystic<br />
                        <input type="radio" name="9" value="2"> Huntress<br />
                        <input type="radio" name="9" value="3"> Mother<br />
                        <input type="radio" name="9" value="4"> Sage<br />
                        <input type="radio" name="9" value="5"> Lover<br /><br />
                    </fieldset>
                    </label>
                </li>
            </ol>
            <button type="button" class="btn btn-primary btn-info btn-lg" data-toggle="modal" data-target="#myModal" id="submit">Submit</button>
        <!-- <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>Submit</button> -->
        </form>
    
        <!-- Modal content-->
        <div id="myModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
            
                <!-- Modal content-->
                <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Friend Suggestion:</h4>
                </div>
                <div class="modal-body">
                    <p>Some text in the modal here</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
                </div>

            </div>
        </div>

    </div>
    <script>
        // function processMatches(){
        // console.log("Button working, yay!");
            $(document).ready(function(){
                var formData = {};
                $('#submit').on("click", function (e){
                    e.preventDefault();
     
                    var answers = $("fieldset input:radio:checked");
                    for(var i =0; i < answers.length; i++)
                        formData[i] = Number(answers[i]['value']);
                    formData['name'] = $("input[type=text]#name").val().trim();
                    formData['picURL'] = $("input[type=text]#photo").val().trim();

                    // AJAX
                    $.post("/api/friends", formData) // https://localhost:3000 (a relative path is more dynamic)
                    .then(data =>{
                        $('.modal-body > p::after').empty();
                        $('.modal-body > p').text("Introduce yourself to your new friend suggestion named " + data.name);
                        var img = $("<img src='" + data.picURL + "' />").addClass("friendSuggestion");
                        $('.modal-body').append(img);
                        $( "form:first" ).submit();
                    })
                    .catch(e => {
                        console.log("error ", e);
                    });
                })
            });
        // In the route: res.send(req.body);  

        /*  Clever way of capturing answers and reformattingdata for the post
            $(document).ready(function(){
                $('#submit').on("click", function (e){
                    e.preventDefault();
                    var answered = $("fieldset input:radio:checked").serializeArray();
                    var count = 0;
                    var answered2 = answered.reduce((array, obj) => { array[count] = obj.value; count++; }, []);
                    console.log("answered ", answered2);
                    $.post("/api/friends", answered2)
                    .then(data => {
                        console.log("yourdata went through ", data);
                    })
                    .catch(e => {
                        console.log("error ", e);
                    });
                })
            });
        */
    </script>
    </body>
</html>